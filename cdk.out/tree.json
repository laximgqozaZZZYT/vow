{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.235.1"},"children":{"VowBackendStack":{"id":"VowBackendStack","path":"VowBackendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.235.1"},"children":{"BackendLambdaRole":{"id":"BackendLambdaRole","path":"VowBackendStack/BackendLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportBackendLambdaRole":{"id":"ImportBackendLambdaRole","path":"VowBackendStack/BackendLambdaRole/ImportBackendLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"VowBackendStack/BackendLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for backend Lambda","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"BackendLogGroup":{"id":"BackendLogGroup","path":"VowBackendStack/BackendLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/BackendLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/lambda/vow-backend","retentionInDays":14}}}}},"BackendFunction":{"id":"BackendFunction","path":"VowBackendStack/BackendFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"VowBackendStack/BackendFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"VowBackendStack/BackendFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"VowBackendStack/BackendFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"VowBackendStack/BackendFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-257784614320-ap-northeast-1","s3Key":"d6aa0774aedac8022274e84303575f0b285a4fdbf1b6aac380a3221af3c6a3bc.zip"},"description":"TypeScript backend for Vow habit tracking (Hono framework)","environment":{"variables":{"NODE_ENV":"production","SUPABASE_URL":"SET_VIA_CONSOLE","SUPABASE_SERVICE_ROLE_KEY":"SET_VIA_CONSOLE","JWT_SECRET":"SET_VIA_CONSOLE","SLACK_CLIENT_ID":"SET_VIA_CONSOLE","SLACK_CLIENT_SECRET":"SET_VIA_CONSOLE","SLACK_SIGNING_SECRET":"SET_VIA_CONSOLE","TOKEN_ENCRYPTION_KEY":"SET_VIA_CONSOLE","CORS_ORIGINS":"http://localhost:3000,https://develop.d1234567890.amplifyapp.com"}},"functionName":"vow-backend","handler":"lambda-package/lambda.handler","loggingConfig":{"logGroup":{"Ref":"BackendLogGroupDA10F1B2"}},"memorySize":512,"role":{"Fn::GetAtt":["BackendLambdaRole563BEADE","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"BackendHttpApi":{"id":"BackendHttpApi","path":"VowBackendStack/BackendHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/BackendHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["*"],"allowMethods":["GET","POST","PUT","DELETE","OPTIONS"],"allowOrigins":["http://localhost:3000","https://develop.d1234567890.amplifyapp.com"],"maxAge":3600},"description":"HTTP API for backend","name":"vow-backend-api","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"VowBackendStack/BackendHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/BackendHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BackendHttpApi557A99DF"},"autoDeploy":true,"stageName":"$default"}}}}},"ANY--{proxy+}":{"id":"ANY--{proxy+}","path":"VowBackendStack/BackendHttpApi/ANY--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.235.1","metadata":[]},"children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"VowBackendStack/BackendHttpApi/ANY--{proxy+}/LambdaIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/BackendHttpApi/ANY--{proxy+}/LambdaIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BackendHttpApi557A99DF"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"payloadFormatVersion":"2.0"}}}}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"VowBackendStack/BackendHttpApi/ANY--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-1:257784614320:",{"Ref":"BackendHttpApi557A99DF"},"/*/*/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"VowBackendStack/BackendHttpApi/ANY--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BackendHttpApi557A99DF"},"authorizationType":"NONE","routeKey":"ANY /{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"BackendHttpApiANYproxyLambdaIntegration5F09785B"}]]}}}}}},"ANY--":{"id":"ANY--","path":"VowBackendStack/BackendHttpApi/ANY--","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.235.1","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"VowBackendStack/BackendHttpApi/ANY--/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-1:257784614320:",{"Ref":"BackendHttpApi557A99DF"},"/*/*/"]]}}}},"Resource":{"id":"Resource","path":"VowBackendStack/BackendHttpApi/ANY--/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BackendHttpApi557A99DF"},"authorizationType":"NONE","routeKey":"ANY /","target":{"Fn::Join":["",["integrations/",{"Ref":"BackendHttpApiANYproxyLambdaIntegration5F09785B"}]]}}}}}}}},"ReminderCheckRule":{"id":"ReminderCheckRule","path":"VowBackendStack/ReminderCheckRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/ReminderCheckRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger reminder check every 5 minutes","name":"vow-reminder-check","scheduleExpression":"rate(5 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"input":"{\"source\":\"aws.scheduler\",\"detail-type\":\"reminder-check\"}"}]}}},"AllowEventRuleVowBackendStackBackendFunction62513DAF":{"id":"AllowEventRuleVowBackendStackBackendFunction62513DAF","path":"VowBackendStack/ReminderCheckRule/AllowEventRuleVowBackendStackBackendFunction62513DAF","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["ReminderCheckRule17B52CC0","Arn"]}}}}}},"FollowUpCheckRule":{"id":"FollowUpCheckRule","path":"VowBackendStack/FollowUpCheckRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/FollowUpCheckRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger follow-up check every 15 minutes","name":"vow-follow-up-check","scheduleExpression":"rate(15 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"input":"{\"source\":\"aws.scheduler\",\"detail-type\":\"follow-up-check\"}"}]}}},"AllowEventRuleVowBackendStackBackendFunction62513DAF":{"id":"AllowEventRuleVowBackendStackBackendFunction62513DAF","path":"VowBackendStack/FollowUpCheckRule/AllowEventRuleVowBackendStackBackendFunction62513DAF","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["FollowUpCheckRuleDCEB79A0","Arn"]}}}}}},"WeeklyReportRule":{"id":"WeeklyReportRule","path":"VowBackendStack/WeeklyReportRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VowBackendStack/WeeklyReportRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger weekly report check every 15 minutes","name":"vow-weekly-report","scheduleExpression":"rate(15 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"input":"{\"source\":\"aws.scheduler\",\"detail-type\":\"weekly-report\"}"}]}}},"AllowEventRuleVowBackendStackBackendFunction62513DAF":{"id":"AllowEventRuleVowBackendStackBackendFunction62513DAF","path":"VowBackendStack/WeeklyReportRule/AllowEventRuleVowBackendStackBackendFunction62513DAF","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["WeeklyReportRule3E0F4A7C","Arn"]}}}}}},"LambdaFunctionArn":{"id":"LambdaFunctionArn","path":"VowBackendStack/LambdaFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"ApiEndpoint":{"id":"ApiEndpoint","path":"VowBackendStack/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"LogGroupName":{"id":"LogGroupName","path":"VowBackendStack/LogGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"VowBackendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"VowBackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VowBackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.235.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VowBackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.235.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}