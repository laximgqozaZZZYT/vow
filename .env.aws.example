# AWS deployment environment variables (example)
#
# This file is NOT used in local dev.
# Local dev uses `.env.local` (repo root) as requested.
#
# For AWS, prefer:
# - CloudFormation Parameters / Secrets Manager for backend secrets
# - Frontend build-time environment variables for Next.js static build

############################
# Frontend (Next.js static)
############################

# API Gateway base URL (from CloudFormation Output ApiBaseUrl)
NEXT_PUBLIC_API_URL=https://<api-id>.execute-api.<region>.amazonaws.com

# Supabase (REQUIRED for authentication)
NEXT_PUBLIC_SUPABASE_URL=https://<project-ref>.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_XXXXXXXX

############################
# Backend (Lambda)
############################

# Security Settings (CRITICAL for production)
NODE_ENV=production
VOW_COOKIE_SECURE=true  # MUST be true for HTTPS

# Optional: used for building absolute urls behind proxies (OAuth redirects)
PUBLIC_BASE_URL=https://<api-id>.execute-api.<region>.amazonaws.com

# CORS origin MUST be the CloudFront domain (or your custom domain), not '*'
ALLOWED_CORS_ORIGIN=https://<cloudfront-domain>

# DB connection (recommended: Secrets Manager)
# If you use Secrets Manager:
DB_SECRET_ARN=arn:aws:secretsmanager:<region>:<account>:secret:<name>
DB_HOST=<aurora-endpoint>
DB_PORT=3306
DB_NAME=vowdb

# Supabase JWT verification (REQUIRED for Bearer token validation)
SUPABASE_JWKS_URL=https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json
SUPABASE_JWT_ISS=https://<project-ref>.supabase.co/auth/v1
SUPABASE_JWT_AUD=authenticated

# Optional OAuth (if you use backend OAuth start/callback endpoints)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Additional Security Headers
HELMET_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100  # per window per IP
