# 要件定義書

このドキュメントは、やること・やらないことを管理・記録するWebサービス（以下、VOW）の機能要件と非機能要件をまとめたものです。

## 目的
ユーザーが日々の「やること（やりたいこと）」と「やらないこと（やめたいこと）」を記録、管理し、習慣として継続／中断を可視化することで行動改善を支援する。

## 利用者（ペルソナ）
- 個人ユーザー：日々のタスクや習慣を記録したい人
- 習慣改善を目指す人：記録を元に継続状況や期間を確認したい人

## 機能要件
1. 認証
   - ユーザーはFirebase Authを用いてサインアップ、サインイン、サインアウトができる。
   - 認証はフロント（Next.js）がFirebaseとやり取りし、バックエンドは検証済みトークンを受け取りAPIアクセスを許可する。

2. ユーザー管理
   - ユーザーの基本情報（表示名、メールアドレス、作成日）を保持する。

3. カテゴリー管理
   - カテゴリーの作成、一覧、更新、削除。
   - カテゴリーは以下のフィールドを持つ：
     - 名前（必須）
     - 詳細（任意）
     - 期限（日付、任意）
     - 作成日、更新日

4. 習慣（Habit）管理
   - 習慣の作成、一覧、更新、削除。
   - 習慣は以下のフィールドを持つ：
     - 名前（必須）
     - カテゴリー（必須）
     - 種別（やる / やらない）（必須）
     - 想定所要時間（分）
     - リマインド（時間帯や繰り返しの指定、最初はシンプルな時刻/曜日で実装）
     - 作成日、更新日

5. 報告（Report）
   - ユーザーは習慣に対して報告を行う。
   - 報告は以下のフィールドを持つ：
     - 習慣ID（必須）
     - 実行日時（必須）
     - 気づき（テキスト、任意）
     - 作成日

6. 統計
   - 習慣ごとの統計：
     - 最終実行からの経過時間（例：前回から何時間/日経過したか）
     - 累計回数
     - 最新N件の報告サマリ（直近の4件など）
   - カテゴリーごとの統計：
     - カテゴリー内の習慣合計、合計実行回数、直近実行日など

7. API
   - RESTful なAPIを提供する。
   - エンドポイント例：
     - POST /api/categories
     - GET /api/categories
     - POST /api/habits
     - GET /api/habits
     - POST /api/reports
     - GET /api/reports
     - GET /api/stats/habit/:id

## 非機能要件
- 可用性：サービスは24/7稼働を想定（初期は小規模でOK）。
- スケーラビリティ：将来的にデータ量増大を見越して、SQL（MySQL）を採用。
- セキュリティ：認証はFirebase Authで行い、バックエンドは受け取るトークンを検証する。機密情報は環境変数で管理。
- ロギングと監視：エラー・主要イベントはログに残す（初期はコンソールログ、将来的に外部ログ集約）。
- バックアップ：DBの定期バックアップを運用で実施することを想定。

## 技術スタック
- フロントエンド：Next.js（TypeScript推奨）
- バックエンド：Python（FastAPI 推奨）
- データベース：MySQL
- 認証：Firebase Authentication
- CI/CD：GitHub Actions

## 優先度（MVP）
1. 認証（Firebase）
2. カテゴリーと習慣の作成・一覧表示
3. 報告の作成・一覧
4. 習慣ごとの基本統計（累計回数、最終実行日時）

## 将来的な拡張案
- プッシュ通知（リマインダー）
- モバイルアプリ（React Native / Expo）
- より高度な分析（継続率、コホート分析）
- 共有機能（友人と習慣を共有）

