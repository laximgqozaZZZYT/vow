# THLI-24 習慣レベルシステム ユーザーガイド

このガイドでは、THLI-24（Total Habit Load Index）習慣レベルシステムの使い方を説明します。

---

## 目次

1. [THLI-24とは](#thli-24とは)
2. [レベルティア（難易度区分）](#レベルティア難易度区分)
3. [ベビーステップ機能](#ベビーステップ機能)
4. [クォータシステム](#クォータシステム)
5. [よくある質問](#よくある質問)

---

## THLI-24とは

### 概要

THLI-24（Total Habit Load Index）は、習慣の難易度を科学的に測定するためのフレームワークです。24個の変数を使用して、習慣がどれくらい大変かを0〜199のスケールで数値化します。

### なぜレベル測定が必要？

習慣を続けられない最大の原因は、**自分に合わない難易度の習慣を選んでしまうこと**です。

- 難しすぎる習慣 → 挫折しやすい
- 簡単すぎる習慣 → 成長を感じられない

THLI-24を使うことで、あなたに最適な難易度の習慣を見つけることができます。

### 測定の仕組み

THLI-24は、習慣を4つの領域（ドメイン）で評価します：

| ドメイン | 説明 | 評価項目の例 |
|---------|------|-------------|
| 🧠 **認知的負荷** | 頭を使う度合い | 計画の複雑さ、判断の必要性、集中力 |
| 💪 **身体的負荷** | 体を使う度合い | 運動強度、移動距離、準備・片付け |
| ⏰ **時間的負荷** | 時間の制約 | 所要時間、頻度、時間帯の固定性 |
| 👥 **社会的負荷** | 他者との関わり | 他人の目、協力の必要性、失敗の影響 |

### 評価プロセス

1. **監査フェーズ（Audit）**: AIコーチが習慣について質問し、16個のファクト（F01-F16）を収集
2. **スコアリングフェーズ（Score）**: 収集した情報から24個の変数を計算
3. **クロスチェック**: NASA-TLX、SRBAI、COM-Bフレームワークで検証
4. **結果表示**: O/E/C（楽観的/期待値/保守的）の3つのレベル推定を提示

### O/E/C レベル推定とは

| 推定タイプ | 説明 | 使い方 |
|-----------|------|--------|
| **O（Optimistic）** | 楽観的推定 | 最も良い条件での難易度 |
| **E（Expected）** | 期待値推定 | 通常の条件での難易度（範囲で表示） |
| **C（Conservative）** | 保守的推定 | 最も厳しい条件での難易度 |

例：「Lv.65-85」と表示された場合、通常はLv.75程度の難易度ですが、条件によってLv.65〜85の範囲で変動する可能性があります。

---

## レベルティア（難易度区分）

習慣のレベル（0-199）は、4つのティア（難易度区分）に分類されます。

### ティア一覧

| ティア | レベル範囲 | 色 | 説明 |
|--------|-----------|-----|------|
| 🟢 **Beginner** | 0-49 | 緑 | 初心者向け。簡単に始められる習慣 |
| 🔵 **Intermediate** | 50-99 | 青 | 中級者向け。ある程度の努力が必要 |
| 🟠 **Advanced** | 100-149 | オレンジ | 上級者向け。継続には強い意志が必要 |
| 🔴 **Expert** | 150-199 | 赤 | エキスパート向け。非常に高い難易度 |

### 各ティアの特徴

#### 🟢 Beginner（Lv.0-49）

**特徴:**
- 2分以内で完了できる
- 特別な準備が不要
- 毎日でも負担にならない
- 失敗しても影響が小さい

**例:**
- 朝起きたらコップ1杯の水を飲む（Lv.5）
- 寝る前に1分間深呼吸する（Lv.15）
- 毎日1ページ本を読む（Lv.25）

#### 🔵 Intermediate（Lv.50-99）

**特徴:**
- 15-30分程度の時間が必要
- ある程度の準備や計画が必要
- 週3-5回程度の頻度が適切
- 継続には意識的な努力が必要

**例:**
- 30分のジョギング（Lv.65）
- 毎日30分の英語学習（Lv.70）
- 週3回のジム通い（Lv.75）

#### 🟠 Advanced（Lv.100-149）

**特徴:**
- 1時間以上の時間が必要
- 複雑な準備や計画が必要
- 他者との調整が必要な場合がある
- 強い動機付けが必要

**例:**
- 毎日1時間のプログラミング学習（Lv.110）
- 週5回の早朝ランニング（Lv.125）
- 毎日の瞑想1時間（Lv.130）

#### 🔴 Expert（Lv.150-199）

**特徴:**
- 非常に高い時間的・身体的コミットメント
- 専門的なスキルや知識が必要
- 生活全体の調整が必要
- 長期的な継続は困難

**例:**
- フルマラソンのトレーニング（Lv.160）
- 毎日3時間の楽器練習（Lv.175）
- 週6日のハードなトレーニング（Lv.185）

### レベルの目安

| あなたの状況 | 推奨ティア |
|-------------|-----------|
| 習慣化が初めて | Beginner (0-49) |
| いくつかの習慣を継続中 | Intermediate (50-99) |
| 習慣化に自信がある | Advanced (100-149) |
| 特定分野のエキスパート | Expert (150-199) |

---

## ベビーステップ機能

### ベビーステップとは

習慣の継続が難しいとき、システムが自動的に**より簡単なバージョン**を提案する機能です。

### いつ提案される？

以下の条件を満たすと、ベビーステップが提案されます：

- 過去14日間の完了率が50%未満
- 習慣がアクティブになってから14日以上経過
- レベルが設定されている

### 2つのプラン

#### Lv.50プラン（半分の難易度）

現在のレベルを約半分に下げたプランです。

**変更される項目:**
- 頻度の削減（毎日→週3回）
- 時間の短縮（30分→15分）
- 目標数の削減（10回→5回）

**例:**
| 項目 | 変更前 | 変更後 |
|------|--------|--------|
| 習慣名 | 30分ジョギング | 15分ジョギング |
| 頻度 | 毎日 | 週3回 |
| 所要時間 | 30分 | 15分 |
| レベル | Lv.70 | Lv.35 |

#### Lv.10プラン（最小限の習慣）

**2分ルール**に基づいた、最も簡単なバージョンです。

**構成要素:**
- **キュー（きっかけ）**: 「朝起きたら」「食事の後に」など
- **アクション（行動）**: 2分以内で完了できる最小限の行動
- **停止条件**: 「〇〇したら終わり」という明確な終了点
- **フォールバック**: できなかった場合の代替行動

**例:**
| 項目 | 内容 |
|------|------|
| 元の習慣 | 30分ジョギング |
| キュー | 朝起きたら |
| アクション | 玄関で靴を履く |
| 停止条件 | 靴を履いたら終わり |
| フォールバック | 靴を履けなかったら、靴を見るだけでもOK |
| レベル | Lv.5 |

### どちらを選ぶべき？

| 状況 | 推奨プラン |
|------|-----------|
| 少し難しいだけ | Lv.50プラン |
| 完全に挫折している | Lv.10プラン |
| 時間がない | Lv.10プラン |
| モチベーションが低い | Lv.10プラン |
| 習慣の核は維持したい | Lv.50プラン |

### ベビーステップの効果

1. **継続のハードルを下げる**: 小さな成功体験を積み重ねる
2. **習慣の連鎖を維持**: 完全にやめるより、小さく続ける方が良い
3. **自信の回復**: 「できた」という感覚を取り戻す
4. **段階的な復帰**: 調子が戻ったら元のレベルに戻せる

---

## クォータシステム

### クォータとは

THLI-24の評価にはAI（OpenAI）を使用するため、月間の評価回数に制限があります。

### プラン別の制限

| プラン | 月間評価回数 | 料金 |
|--------|-------------|------|
| **フリープラン** | 10回/月 | 無料 |
| **プレミアムプラン** | 無制限 | 有料 |

### クォータの確認方法

1. ダッシュボードの右上にある「THLI-24」ウィジェットを確認
2. 「今月の残り評価回数: X/10」と表示されます

### クォータの消費タイミング

クォータは**評価が正常に完了した場合のみ**消費されます。

| 状況 | クォータ消費 |
|------|-------------|
| 評価が正常に完了 | ✓ 消費される |
| 評価をキャンセル | ✗ 消費されない |
| 評価が失敗（エラー） | ✗ 消費されない |
| Missingness Firewall発動 | ✗ 消費されない |

### クォータを使い切ったら

- 新しい評価を開始できなくなります
- 既存の評価結果は引き続き閲覧可能です
- 翌月1日にクォータがリセットされます
- プレミアムプランにアップグレードすると即座に制限が解除されます

### クォータを効率的に使うコツ

1. **重要な習慣を優先**: 最も継続したい習慣から評価する
2. **一括評価を活用**: 「すべての習慣を評価」機能で効率的に評価
3. **情報を準備**: 評価前に習慣の詳細を整理しておく
4. **再評価は慎重に**: 大きな変更がない限り再評価は不要

---

## よくある質問

### Q: レベル評価は必須ですか？

**A:** いいえ、任意です。レベル評価なしでも習慣を作成・管理できます。ただし、レベル評価を行うことで、より適切な難易度調整やベビーステップ機能を利用できます。

### Q: 評価結果に納得できない場合は？

**A:** 再評価を行うことができます。ただし、クォータを1回消費します。評価時により詳細な情報を提供すると、より正確な結果が得られます。

### Q: Missingness Firewallとは何ですか？

**A:** 評価に必要な情報が不足している場合に発動する安全機能です。不正確な評価を防ぐため、追加の質問（VOI質問）が表示されます。この場合、クォータは消費されません。

### Q: レベルアップはどのように判定されますか？

**A:** 以下の条件を満たすと、システムが自動的にレベルアップを提案します：
- 過去30日間の完了率が90%以上
- 最後のレベル変更から30日以上経過
- レベルが設定されている

### Q: 目標のレベルはどう計算されますか？

**A:** 目標のレベルは、紐づいている習慣の中で**最も高いレベル**が表示されます。これは、目標達成には最も難しい習慣をクリアする必要があるためです。

### Q: 日本語と英語で評価結果は変わりますか？

**A:** いいえ、言語設定に関わらず、同じ習慣に対しては±5ポイント以内の一貫した結果が得られるよう設計されています。

### Q: 評価中にエラーが発生したらどうなりますか？

**A:** 会話の状態が自動保存され、後から「再開」ボタンで続きから評価を再開できます。クォータは消費されません。

---

## 関連ドキュメント

- [THLI-24 API リファレンス](./THLI_API_REFERENCE.md)
- [THLI-24 マニュアルテストガイド](./THLI_MANUAL_TESTING_GUIDE.md)
- [デプロイ手順](./DEPLOYMENT_GUIDE.md)

---

## サポート

ご不明な点がございましたら、以下の方法でお問い合わせください：

1. GitHub Issuesで報告
2. アプリ内のフィードバック機能を使用
3. ドキュメントを参照
