<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindmap Mobile Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .instructions {
            background: #e3f2fd;
            color: #1565c0;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #bbdefb;
            margin-bottom: 20px;
        }
        .test-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        .warning { background-color: #fff3cd; color: #856404; }
        button {
            background-color: #2196f3;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            min-height: 44px;
        }
        button:hover {
            background-color: #1976d2;
        }
        .mobile-note {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ffeaa7;
            margin-bottom: 15px;
            font-size: 14px;
        }
        iframe {
            width: 100%;
            height: 70vh;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            iframe {
                height: 60vh;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ“± Mindmap Mobile Test</h1>
    
    <div class="mobile-note">
        <strong>ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆç”¨ãƒšãƒ¼ã‚¸</strong><br>
        ã“ã®ãƒšãƒ¼ã‚¸ã¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã®æ“ä½œãƒ†ã‚¹ãƒˆç”¨ã§ã™ã€‚PCã§ã‚‚å‹•ä½œç¢ºèªã§ãã¾ã™ãŒã€ãƒ¢ãƒã‚¤ãƒ«æ©Ÿèƒ½ã‚’ç¢ºèªã™ã‚‹ã«ã¯å®Ÿéš›ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã¾ãŸã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºã«ã—ã¦ãã ã•ã„ã€‚
    </div>

    <div class="instructions">
        <h3>ğŸ¯ ãƒ¢ãƒã‚¤ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆæ‰‹é †:</h3>
        <ol>
            <li><strong>ãƒãƒ¼ãƒ‰ã‚¿ãƒƒãƒ—</strong>: ãƒãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã€ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã«ãƒœãƒˆãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
            <li><strong>ãƒœãƒˆãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ“ä½œ</strong>: 
                <ul>
                    <li>âœï¸ Edit Text - ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†</li>
                    <li>ğŸ—‘ï¸ Delete - ãƒãƒ¼ãƒ‰å‰Šé™¤</li>
                    <li>ğŸ”„ As Habit - ç¿’æ…£ç™»éŒ²</li>
                    <li>ğŸ¯ As Goal - ç›®æ¨™ç™»éŒ²</li>
                </ul>
            </li>
            <li><strong>çµç·šæ“ä½œ</strong>: 
                <ul>
                    <li>ãƒãƒ¼ãƒ‰ã®é’ã„ãƒãƒ³ãƒ‰ãƒ«ï¼ˆæ¥ç¶šç‚¹ï¼‰ã‚’ã‚¿ãƒƒãƒ—</li>
                    <li>çµç·šãƒ¢ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã€ä¸Šéƒ¨ã«é’ã„ãƒãƒŠãƒ¼ãŒè¡¨ç¤º</li>
                    <li>åˆ¥ã®ãƒãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¦çµç·šä½œæˆ</li>
                    <li>ã¾ãŸã¯ã€ŒCancelã€ã§çµç·šãƒ¢ãƒ¼ãƒ‰çµ‚äº†</li>
                </ul>
            </li>
            <li><strong>ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ç·¨é›†</strong>: ãƒãƒ¼ãƒ‰ã‚’ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã—ã¦ç›´æ¥ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹</li>
            <li><strong>é•·æŠ¼ã—ç§»å‹•</strong>: ãƒãƒ¼ãƒ‰ã‚’é•·æŠ¼ã—ã—ã¦ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•ï¼ˆé»„è‰²ã„ãƒªãƒ³ã‚°è¡¨ç¤ºï¼‰</li>
            <li><strong>ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º</strong>: ãƒ¢ãƒã‚¤ãƒ«ã§ã¯æ¥ç¶šç‚¹ãŒå¤§ããè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
        </ol>
    </div>

    <div class="test-container">
        <h3>ğŸ”§ æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h3>
        <div class="test-section">
            <h4>ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š</h4>
            <div id="deviceInfo" class="test-result info">åˆ¤å®šä¸­...</div>
            <button onclick="checkDeviceInfo()">ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ç¢ºèª</button>
        </div>
        
        <div class="test-section">
            <h4>ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆå¯¾å¿œ</h4>
            <div id="touchSupport" class="test-result info">ç¢ºèªä¸­...</div>
            <button onclick="checkTouchSupport()">ã‚¿ãƒƒãƒã‚µãƒãƒ¼ãƒˆç¢ºèª</button>
        </div>

        <div class="test-section">
            <h4>ç”»é¢ã‚µã‚¤ã‚º</h4>
            <div id="screenInfo" class="test-result info">ç¢ºèªä¸­...</div>
            <button onclick="checkScreenInfo()">ç”»é¢æƒ…å ±ç¢ºèª</button>
        </div>
    </div>

    <div class="test-container">
        <h3>ğŸ“‹ æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ</h3>
        <div class="test-result success">
            âœ… <strong>PCè¡¨ç¤ºæ™‚</strong>: å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆå¾“æ¥é€šã‚Šï¼‰
        </div>
        <div class="test-result success">
            âœ… <strong>ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºæ™‚</strong>: ãƒãƒ¼ãƒ‰ã‚¿ãƒƒãƒ—ã§ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã«ãƒœãƒˆãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
        </div>
        <div class="test-result success">
            âœ… <strong>çµç·šæ“ä½œ</strong>: ãƒãƒ³ãƒ‰ãƒ«ã‚¿ãƒƒãƒ—ã§çµç·šãƒ¢ãƒ¼ãƒ‰é–‹å§‹ã€ãƒãƒ¼ãƒ‰ã‚¿ãƒƒãƒ—ã§çµç·šä½œæˆ
        </div>
        <div class="test-result success">
            âœ… <strong>ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º</strong>: ãƒ¢ãƒã‚¤ãƒ«ã§ã¯24pxÃ—24pxã€PCã§ã¯12pxÃ—12px
        </div>
        <div class="test-result success">
            âœ… <strong>ã‚¿ãƒƒãƒãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</strong>: é•·æŠ¼ã—æ™‚ã®é»„è‰²ã„ãƒªãƒ³ã‚°è¡¨ç¤º
        </div>
    </div>

    <div class="test-container">
        <h3>ğŸ–¥ï¸ Mindmap Widget</h3>
        <iframe id="mindmapFrame" src="http://localhost:3001/dashboard"></iframe>
    </div>

    <script>
        function checkDeviceInfo() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                             (window.innerWidth <= 768) ||
                             ('ontouchstart' in window);
            
            const info = {
                userAgent: navigator.userAgent,
                isMobile: isMobile,
                hasTouch: 'ontouchstart' in window,
                screenWidth: window.innerWidth,
                screenHeight: window.innerHeight
            };
            
            document.getElementById('deviceInfo').innerHTML = `
                <strong>ãƒ¢ãƒã‚¤ãƒ«åˆ¤å®š:</strong> ${isMobile ? 'âœ… ãƒ¢ãƒã‚¤ãƒ«' : 'âŒ ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—'}<br>
                <strong>User Agent:</strong> ${info.userAgent}<br>
                <strong>ç”»é¢å¹…:</strong> ${info.screenWidth}px
            `;
            document.getElementById('deviceInfo').className = `test-result ${isMobile ? 'success' : 'warning'}`;
        }

        function checkTouchSupport() {
            const hasTouch = 'ontouchstart' in window;
            const hasTouchEvents = 'TouchEvent' in window;
            const maxTouchPoints = navigator.maxTouchPoints || 0;
            
            document.getElementById('touchSupport').innerHTML = `
                <strong>ã‚¿ãƒƒãƒã‚µãƒãƒ¼ãƒˆ:</strong> ${hasTouch ? 'âœ… å¯¾å¿œ' : 'âŒ éå¯¾å¿œ'}<br>
                <strong>TouchEvent:</strong> ${hasTouchEvents ? 'âœ… åˆ©ç”¨å¯èƒ½' : 'âŒ åˆ©ç”¨ä¸å¯'}<br>
                <strong>æœ€å¤§ã‚¿ãƒƒãƒãƒã‚¤ãƒ³ãƒˆ:</strong> ${maxTouchPoints}
            `;
            document.getElementById('touchSupport').className = `test-result ${hasTouch ? 'success' : 'error'}`;
        }

        function checkScreenInfo() {
            const info = {
                width: window.innerWidth,
                height: window.innerHeight,
                devicePixelRatio: window.devicePixelRatio || 1,
                orientation: screen.orientation ? screen.orientation.type : 'unknown'
            };
            
            document.getElementById('screenInfo').innerHTML = `
                <strong>ç”»é¢ã‚µã‚¤ã‚º:</strong> ${info.width} Ã— ${info.height}px<br>
                <strong>ãƒ‡ãƒã‚¤ã‚¹æ¯”ç‡:</strong> ${info.devicePixelRatio}<br>
                <strong>å‘ã:</strong> ${info.orientation}
            `;
            document.getElementById('screenInfo').className = 'test-result info';
        }

        // åˆæœŸãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', () => {
            checkDeviceInfo();
            checkTouchSupport();
            checkScreenInfo();
        });

        // ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã®å†ãƒã‚§ãƒƒã‚¯
        window.addEventListener('resize', () => {
            setTimeout(() => {
                checkDeviceInfo();
                checkScreenInfo();
            }, 100);
        });

        // iframeå†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç›£è¦–
        window.addEventListener('message', (event) => {
            console.log('Received message from iframe:', event.data);
            
            if (event.data.type === 'MOBILE_MENU_OPENED') {
                console.log('âœ… Mobile bottom menu opened successfully');
            } else if (event.data.type === 'CONNECTION_MODE_STARTED') {
                console.log('âœ… Mobile connection mode started successfully');
            }
        });
    </script>
</body>
</html>